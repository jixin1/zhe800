var _createClass=function(){function e(i,t){for(var s=0;s<t.length;s++){var e=t[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(i,t,s){return t&&e(i.prototype,t),s&&e(i,s),i}}();function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){function i(){_classCallCheck(this,i),this.user=$("#main form ul li input").eq(0),this.pass=$("#main form ul li input").eq(1),this.sub=$("#main form ul li span"),this.drag=$("#main form ul li .sliding_block"),this.slide=$("#main form ul li .slide_box"),this.userswitch=!1,this.passswitch=!1,this.dragswitch=!1}(new(_createClass(i,[{key:"init",value:function(){var t=this;this.drag.on("mousedown",function(i){i=i||window.event,t.down(i),$(document).on("mousemove",function(i){return i=i||window.event,t.move(i),$(document).on("mouseup",function(){t.up()}),!1})}),this.sub.on("click",function(){return""!=t.user.val()&&(t.userswitch=!0),""!=t.pass.val()&&(t.passswitch=!0),t.loginAuthentication(),!1})}},{key:"down",value:function(i){this.sx=i.offsetX}},{key:"move",value:function(i){var t=i.clientX-this.slide.offset().left-this.sx;t<0?t=0:t>this.slide.width()-this.drag.width()&&(t=this.slide.width()-this.drag.width()),this.drag.css("left",t),t==this.slide.width()-this.drag.width()&&(this.slide.html("验证通过"),this.slide.css({background:"#80ff00",color:"#fff"}),this.dragswitch=!0)}},{key:"up",value:function(){$(document).off("mousemove"),$(document).off("mouseup")}},{key:"loginAuthentication",value:function(){var t=this;1==this.userswitch&&1==this.passswitch&&1==this.dragswitch?$.ajax({url:"../php/login.php",type:"POST",data:{user:t.user.val(),pass:t.pass.val()},success:function(i){Boolean(i)?($.cookie("zhe800accountNumber",t.user.val(),{expires:7}),window.location.href="index.html"):alert("用户名或密码错误,请重试")}}):alert("请输入通行证用户名、密码和滑块验证")}}]),i)).init()}();