var _createClass=function(){function e(i,t){for(var s=0;s<t.length;s++){var e=t[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(i,t,s){return t&&e(i.prototype,t),s&&e(i,s),i}}();function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){function i(){_classCallCheck(this,i),this.head_title=$("head title"),this.details_main=$("#details_main"),this.small_pic_img=$("#details_main .details_left .small_pic img"),this.details_ul=$("#details_main .details_left ul"),this.datails_headline=$("#details_main .details_middle h1"),this.datails_subtitle=$("#details_main .details_middle h3"),this.product_price=$("#details_main .details_middle .product_price strong"),this.address=$("#details_main .details_middle .address span"),this.color=$("#details_main .details_middle .color dd"),this.size=$("#details_main .details_middle .size dd"),this.number=$("#details_main .details_middle .number dd"),this.click_buy=$("#details_main .details_middle .click_buy .car"),this.num="",this.hrefarr="",this.sidarr="",this.sid="",this.colorarr="",this.colorstr="",this.colortitlearr="",this.sizearr="",this.sizestr="",this.detailsbigimgurlarr="",this.detailssmallimgurlarr="",this.detailssmallimgurlstr="",this.switchcolor=!1,this.switchsize=!1,this.clickcolor="",this.clicksize="",this.cookiesidarr=[],this.cookienumberarr=[],this.cookiesizearr=[],this.cookiecolorarr=[]}(new(_createClass(i,[{key:"init",value:function(){this.hrefarr=location.href.split("?"),this.sidarr=this.hrefarr[1].split("="),this.sid=this.sidarr[1];var t=this;console.log(this.sid),this.getdata(),this.color.on("click",function(i){t.choicecolor(i)}),this.size.on("click",function(i){t.choicesize(i)}),this.number.find("p .num_right").on("click",function(){t.num_increase()}),this.number.find("p .num_left").on("click",function(){t.num_reduce()}),this.click_buy.on("click",function(){$.cookie("zhe800accountNumber")?t.shoppingCart():(alert("还没登录，请登录"),window.location.href="login.html")})}},{key:"getdata",value:function(){var s=this;$.ajax({url:"../php/getdetail.php",data:{id:s.sid},dataType:"json",success:function(i){console.log(i),s.head_title.html(i.indextitle),s.datails_headline.html(i.indextitle),s.datails_subtitle.html(i.indextitle),s.product_price.html(i.indexprice),s.address.html(i.address),s.colorarr=i.colorurl.split(","),s.colortitlearr=i.color.split(","),$.each(s.colorarr,function(i){s.colorstr+='\n                        <a href="javascript:;"><img src="'+s.colorarr[i]+'" title="'+s.colortitlearr[i]+'"></a>\n                        '}),s.color.html(s.colorstr),s.sizearr=i.size.split(","),$.each(s.sizearr,function(i){s.sizestr+='\n                        <a href="javascript:;">'+s.sizearr[i]+"</a>\n                        "}),s.size.html(s.sizestr),s.detailssmallimgurlarr=i.detailssmallimgurl.split(","),$.each(s.detailssmallimgurlarr,function(i){s.detailssmallimgurlstr+='\n                        <li>\n                            <a href="javascript:;"><img src="'+s.detailssmallimgurlarr[i]+'"></a>\n                        </li>\n                        '}),s.details_ul.html(s.detailssmallimgurlstr),s.detailsbigimgurlarr=i.detailsbigimgurl.split(","),s.small_pic_img.attr("src",s.detailsbigimgurlarr[0]),s.details_ul.on("click",function(i){var t=(i=i||window.event).target||i.srcElement;s.details_ul.find("img").each(function(i,t){$(t).attr("a",i)}),"IMG"==t.nodeName&&s.small_pic_img.attr("src",s.detailsbigimgurlarr[$(t).attr("a")])})}})}},{key:"choicecolor",value:function(i){var t=(i=i||window.event).target||i.srcElement;this.color.find("a").css({"border-width":"1px","border-style":"solid","border-color":"#ccc"}),"IMG"==t.nodeName&&($(t).parent("a").css({"border-width":"1px","border-style":"solid","border-color":"#e02f2f"}),this.clickcolor=$(t).attr("title")),this.switchcolor=!0}},{key:"choicesize",value:function(i){var t=(i=i||window.event).target||i.srcElement;this.size.find("a").css({"border-width":"1px","border-style":"solid","border-color":"#ccc"}),"A"==t.nodeName&&($(t).css({"border-width":"1px","border-style":"solid","border-color":"#e02f2f"}),this.clicksize=$(t).html()),this.switchsize=!0}},{key:"num_increase",value:function(){this.num=parseInt($(this.number).find("input").val()),this.num++,1<this.num&&this.number.find("p .num_left").css({"background-img":"url(../img/p_Spirit6.b652a725.png)","background-position":"-1px -210px"}),this.number.find("input").attr("value",this.num)}},{key:"num_reduce",value:function(){this.num=parseInt($(this.number).find("input").val()),this.num--,this.num<=1&&(this.num=1,this.number.find("p .num_left").css({"background-img":"url(../img/p_Spirit6.b652a725.png)","background-position":"-1px -179px"})),this.number.find("input").attr("value",this.num)}},{key:"shoppingCart",value:function(){1==this.switchcolor&&1==this.switchsize?($.cookie("sid")&&$.cookie("number")?(console.log($.cookie("sid")),this.cookiesidarr=$.cookie("sid").split(","),this.cookienumberarr=$.cookie("number").split(","),this.cookiecolorarr=$.cookie("color").split(","),this.cookiesizearr=$.cookie("size").split(","),this.cookiesidarr.push(this.sid),this.cookienumberarr.push(this.number.find("input").val()),this.cookiecolorarr.push(this.clickcolor),console.log(this.cookiesidarr)):(this.cookiesidarr.push(this.sid),this.cookienumberarr.push(this.number.find("input").val()),this.cookiecolorarr.push(this.clickcolor)),this.cookiesizearr.push(this.clicksize),$.cookie("sid",this.cookiesidarr,{expires:7}),$.cookie("number",this.cookienumberarr,{expires:7}),$.cookie("color",this.cookiecolorarr,{expires:7}),$.cookie("size",this.cookiesizearr,{expires:7}),window.location.href="cart.html"):alert("请选择颜色或尺码")}}]),i)).init()}(),function(){function i(){_classCallCheck(this,i),this.cartnum=$("#header ul a strong"),this.sidercartnum=$("#sidebar .sidebar_top em"),this.sidarr=[]}(new(_createClass(i,[{key:"init",value:function(){$.cookie("sid")&&$.cookie("zhe800accountNumber")?(this.sidarr=$.cookie("sid").split(","),this.cartnum.html(this.sidarr.length),this.sidercartnum.html(this.sidarr.length)):(this.cartnum.html(0),this.sidercartnum.html(0))}}]),i)).init()}(),function(){function i(){_classCallCheck(this,i),this.carthref=$("#header ul li").eq(2).find("a")}(new(_createClass(i,[{key:"init",value:function(){$.cookie("zhe800accountNumber")?this.carthref.attr("href","cart.html"):(this.carthref.on("click",function(){alert("还没登录，请登录")}),this.carthref.attr("href","login.html"))}}]),i)).init()}();